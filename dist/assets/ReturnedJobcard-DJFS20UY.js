import{r as c,k as o,u as f,j as e,a as g,b as N}from"./index-B4Q0un_g.js";/* empty css                  */import{I as w}from"./index-DtO_s9oG.js";const v=()=>{const[x,m]=c.useState([]),[a,i]=c.useState(1),[l,h]=c.useState(0),d=o(t=>t.searchTerm),n=o(t=>t.warranty),u=f(),p=async()=>{var t,r;try{console.log(n);const s=await g.get(`${N}/search?page=${a}&limit=6&returned=true&searchTerm=${d}&${n?"warranty=true":""}`);if(s.data.success)console.log("Job cards fetched successfully:",s.data.data),m((t=s==null?void 0:s.data)==null?void 0:t.data),h((r=s==null?void 0:s.data)==null?void 0:r.totalPages);else return console.error("Failed to fetch job cards:",s.data.message),null}catch(s){return console.error("Error fetching job cards:",s.message||s),null}};return c.useEffect(()=>{p(),console.log("re render")},[a,d,n]),e.jsx("div",{className:"min-h-screen w-full px-4 py-6 ",children:e.jsxs("div",{className:"flex flex-col items-start w-full max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Retuned Works"}),e.jsx("p",{className:"text-white mb-6",children:"Hi-Tech Engineering Company"}),e.jsxs("div",{className:"w-full bg-white rounded-lg shadow-md overflow-hidden",children:[e.jsxs("table",{className:"min-w-full  border border-slate-600",children:[e.jsx("thead",{className:"bg-[#4a4d50] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left font-medium",children:"Customer Name"}),e.jsx("th",{className:"px-6 py-3 text-left font-medium",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left font-medium",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left font-medium",children:"Jobcard No."}),e.jsx("th",{className:"px-6 py-3 text-left font-medium",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left font-medium",children:"Worker"}),e.jsx("th",{className:"px-6 py-3 text-left font-medium",children:"Action"})]})}),e.jsx("tbody",{className:"",children:x.map(t=>{var r;return e.jsxs("tr",{className:"border-b border-slate-600 bg-[#282a2c] transition duration-300",children:[e.jsx("td",{className:"px-6 py-4 text-white",children:t.customerName}),e.jsx("td",{className:"px-6 py-4 text-white",children:t.phoneNumber}),e.jsx("td",{className:"px-6 py-4 text-white",children:new Date(t.InDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-white",children:t.jobCardNumber}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-white text-sm ${t.jobCardStatus==="Completed"?"bg-green-500":t.jobCardStatus==="In Progress"?"bg-yellow-500":"bg-[#d65f63] hover:bg-[#e94560]"}`,children:t.jobCardStatus})}),e.jsx("td",{className:"px-6 py-4 gap-4",children:t.worker&&e.jsx("div",{children:e.jsx(w,{src:(r=t==null?void 0:t.worker)==null?void 0:r.workerImage,alt:"workerImage",className:" rounded-full",height:40,width:40})})}),e.jsx("td",{className:"px-6 py-4 flex gap-4 items-center",children:e.jsx("button",{className:"px-4 py-2 w-fit h-fit bg-[#3890d8] text-white text-sm font-semibold rounded-md transition duration-300 hover:bg-blue-500 active:scale-75",onClick:()=>u(`/admin/jobcard/${t._id}`),children:"View"})})]},t._id)})})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-[#282a2c]",children:[e.jsx("button",{onClick:()=>i(t=>Math.max(t-1,1)),className:`px-4 py-2 bg-[#3890d8] text-white rounded-md transition duration-300 hover:bg-[#14c8c8] ${a===1?"opacity-50 cursor-not-allowed":""}`,disabled:a===1,children:"Previous"}),e.jsxs("span",{className:"text-white",children:["Page ",a," of ",l]}),e.jsx("button",{onClick:()=>i(t=>Math.min(t+1,l)),className:`px-4 py-2 bg-[#3890d8] text-white rounded-md transition duration-300 hover:bg-[#14c8c8] ${a===l?"opacity-50 cursor-not-allowed":""}`,disabled:a===l,children:"Next"})]})]})]})})};export{v as default};
